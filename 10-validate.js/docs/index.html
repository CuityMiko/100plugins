<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <title>validate.js</title>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0,minimal-ui">
  <meta name="keywords" content="validate.js">
  <meta name="description" content="validate.js">
  <link rel="stylesheet" href="css/app.css">
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="validate/validate.css">
  <link rel="icon" href="favicon.ico">
</head>

<body>
  <form class="validate-demo">
    <p>
      <label>字符串</label>
      <input type="text" name="vInput">
    </p>
    <p>
      <label>数字</label>
      <input type="number" name="vNumber">
    </p>
    <p>
      <label>正则表达式</label>
      <input type="text" name="vRegex">
    </p>
    <p>
      <label>自定义验证</label>
      <input type="text" name="vCustomize">
    </p>
    <p>
      <label>文本框</label>
      <textarea name="vTextarea"></textarea>
    </p>
    <p>
      <label>单选框</label>
      <label><input name="vFruit" type="radio" value="1" />苹果</label>
      <label><input name="vFruit" type="radio" value="2" />桃子</label>
      <label><input name="vFruit" type="radio" value="3" />香蕉</label>
      <label><input name="vFruit" type="radio" value="4" />梨</label>
      <label><input name="vFruit" type="radio" value="5" />其它</label>
    </p>
    <p>
      <label>复选框</label>
      <label><input name="vFruit2" type="checkbox" value="1" />苹果</label>
      <label><input name="vFruit2" type="checkbox" value="2" />桃子</label>
      <label><input name="vFruit2" type="checkbox" value="3" />香蕉</label>
      <label><input name="vFruit2" type="checkbox" value="4" />梨</label>
    </p>
    <p>
      <label>下拉框</label>
      <select name="vFruit3">
        <option value="1">苹果</option>
        <option value="2">桃子</option>
        <option value="3">香蕉</option>
        <option value="4">梨</option>
      </select>
    </p>
    <input class="submit" type="submit" value="Submit">
  </form>
  <script src="validate/validate.js"></script>
  <script src="js/app.js"></script>
  <script>

    var validator1 = function (value, callback) {
      if(value === ''){
        callback(new Error('请输入密码'));
      } else if (value.length < 6) {
        callback(new Error('至少6个字符'));
      } else {
        callback();
      }
    }

    var validator2 = function (value, callback) {
      if(value === ''){
        callback(new Error('请选择'));
      } else if (value !== '1') {
        callback(new Error('请选择苹果'));
      } else {
        callback();
      }
    }

    var validator3 = function (value, callback) {
      if(value.length === 0){
        callback(new Error('请选择'));
      } else if (value.length < 3) {
        callback(new Error('请至少选择三个'));
      } else {
        callback();
      }
    }

    var validator4 = function (value, callback) {
      if(value === ''){
        callback(new Error('请选择'));
      } else if (value !== '2') {
        callback(new Error('请选择桃子'));
      } else {
        callback();
      }
    }


    new Validate({
      container: '.validate-demo',
      itemParent: 'p',
      submitHandler: function(form) {
        form.submit();
      },
      rules: {
        vInput: [
          { required: true, message: '请输入', trigger: 'blur' },
          { minlength: 3, maxlength: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }
        ],
        vNumber: [
          { required: true, trigger: 'blur' },
          { min: 3, max: 10, trigger: 'blur' }
        ],
        vRegex: [
          { required: true, trigger: 'blur' },
          { regex: /^1[34578]\d{9}$/, trigger: 'blur' }
        ],
        vCustomize: [
          { validator: validator1, trigger: 'blur' }
        ],
        vTextarea: [
          { required: true, message: '请选择活动资源', trigger: 'blur' }
        ],
        vFruit: [
          { validator: validator2, trigger: 'change' }
        ],
        vFruit2: [
          { validator: validator3, trigger: 'change' }
        ],
        vFruit3: [
          { validator: validator4, trigger: 'change' }
        ]
      }
    });
  </script>
</body>

</html>
